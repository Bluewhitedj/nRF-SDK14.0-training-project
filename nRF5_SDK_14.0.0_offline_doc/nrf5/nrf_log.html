<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v14.0.0: Logger module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v14.0.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<!--<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>-->
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s132","s140","s212","s332"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nrf_log.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Logger module </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The logger module provides logging capability for your application. It is used by SDK modules and can be also utilized in application code. Main features of this library are:</p>
<ul>
<li>Four severity levels - ERROR, WARNING, INFO, and DEBUG.</li>
<li>Formatted string (printf-like) log format.</li>
<li>Dedicated macro for dumping data.</li>
<li>Configurable global severity level.</li>
<li>Independent severity level for each module.</li>
<li>Enabling and disabling logging per module and globally.</li>
<li>Optional timestamping.</li>
<li>Optional coloring of the logs for different modules and different severity levels.</li>
<li>Prefixing log entries with the module name and severity.</li>
<li>Deferring of log processing to idle stage.</li>
<li>Logging mechanism decoupled from the logger backend.</li>
<li>Multiple backends supported</li>
<li>Following backends are provided: RTT, UART, console (<a class="el" href="structnrf__cli.html" title="CLI instance internals.">nrf_cli</a>)</li>
<li>Optional dynamic filtering of logs.</li>
</ul>
<h1><a class="anchor" id="nrf_log_processing"></a>
Logs processing</h1>
<p>Logs can be processed in two ways:</p>
<ul>
<li>In-place processing.</li>
<li>Deferred processing.</li>
</ul>
<p>If the deferred mode is switched off, the logs are processed in the place where the logger is used. It means that the pointer to a formatted string and the arguments are passed to the logger backend for processing. It is possible for the backend to buffer the logs, but the frontend part of the logging is performed once the backend processing function returns. This approach is straightforward but in many cases not optimal. It can significantly impact performance, especially when logs are used in interrupt context.</p>
<p>In the deferred mode, whenever the logger is used, the pointer to the string and the arguments are stored in an internal buffer and the log is not processed. It is up to the user to trigger processing whenever suitable. In most cases, the processing is performed in an idle stage, when the system would normally sleep. The size of the buffer can be configured, so that it can be adjusted to the amount of log entries and the nature of idle periods in the application. In the deferred mode, logging takes considerably fewer cycles in the place where it is called (compared to in-place mode), because the processing cost is shifted to idle stage. If the buffer is too small, the logger detects it and injects an overflow marker. In such case, logging is blocked until there is room for new entries in the buffer.</p>
<p>Using the deferred mode introduces some limitations to the logging mechanism:</p>
<ul>
<li>Number of arguments in a formatted string is limited to six.</li>
<li>All arguments are treated as uint32_t. This results in the following:<ul>
<li>In certain situations (e.g. smaller variables like uint8_t as arguments) the compiler will give a warning and the argument must be masked and cast to uint32_t.</li>
<li>The logger cannot handle arguments bigger than 32 bits so they must be explicitly split up by the user into two separate entries.</li>
</ul>
</li>
<li>Since the logs are not processed directly, it is risky to pass pointers as arguments, especially to variables that do not have static addresses, for example a variable allocated on the stack. By the time the log is processed, the pointer can point to invalid data. The logger provides a mechanism to overcome this issue by enforcing a string that is copied into the internal logger buffer.</li>
</ul>
<p>For example, the following way of logging a temporary string is not recommended:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> foo(<span class="keywordtype">void</span>)</div>
<div class="line">{ </div>
<div class="line">    <span class="keywordtype">char</span> string_on_stack[] = <span class="stringliteral">&quot;stack&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//WRONG! by the time the log is processed, variable content will be invalid</span></div>
<div class="line">    <a class="code" href="group__nrf__log.html#gac8d37e95648e05580513df9aaddf02c3" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_INFO</a>(<span class="stringliteral">&quot;%s&quot;</span>,string_on_stack);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Instead, use the following way of logging a temporary string:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> foo(<span class="keywordtype">void</span>)</div>
<div class="line">{ </div>
<div class="line">    <span class="keywordtype">char</span> string_on_stack[] = <span class="stringliteral">&quot;stack&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//nrf_log_push() copies the string into the logger buffer and returns address from the logger buffer</span></div>
<div class="line">    <a class="code" href="group__nrf__log.html#gac8d37e95648e05580513df9aaddf02c3" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_INFO</a>(<span class="stringliteral">&quot;%s&quot;</span>,<a class="code" href="group__nrf__log.html#ga4b92f0478fe464773776f619776f9c4e" title="Function for copying a string to the internal logger buffer if logs are deferred.">nrf_log_push</a>(string_on_stack));</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="nrf_log_config"></a>
Configuration</h1>
<p>The following are the logger frontend configuration options:</p>
<ul>
<li><a class="el" href="group__nrf__log__config.html#gab2f7df0debb6697ce174069ce3c5f7f5">NRF_LOG_ENABLED</a> - Enable the logger. If disabled, then the logger and all logger entries are not compiled.</li>
<li><a class="el" href="group__nrf__log__config.html#ga3016ad60bd2f3cd631d8371b2f98b74e">NRF_LOG_DEFAULT_LEVEL</a> - Default severity level. Available options are: ERROR (highest), WARNING, INFO, and DEBUG (lowest). This option configures the lowest severity level that can be present in the system. For example, if it is set to the INFO level, all DEBUG entries are not compiled. Every module can set a local severity level and the actual severity level that is applied for the module is the highest pick from local and global. For example, if the module severity level is set to DEBUG but the default severity level is set to INFO, then all debug log entries in the module are not compiled.</li>
<li><a class="el" href="group__nrf__log__config.html#ga25bb8015e18e6e1105175c6486fff8a6">NRF_LOG_USES_TIMESTAMP</a> - If enabled, then a timestamp is added to every log entry. The user must provide a function that returns a 32-bit timestamp value during initialization. The source of the timestamp is not important for the logger. If timestamping is enabled and this function is not provided, initialization fails with an error.</li>
<li><a class="el" href="group__nrf__log__config.html#ga0e6535f82a69e45237227a4dba92c180">NRF_LOG_USES_COLORS</a> - If enabled, then every string is prefixed with an ANSI escape code with the configured color. The user can configure colors of errors (<a class="el" href="group__nrf__log__config.html#ga5ac1c03bb0f2cf9d1ebad8b7fc6e750d">NRF_LOG_ERROR_COLOR</a>) and warnings (<a class="el" href="group__nrf__log__config.html#ga40d1f488741e0c3ae4e5eaea7e3c64da">NRF_LOG_WARNING_COLOR</a>) for all modules, and the default color for info and debug logs. Colors for info and debug logs can be overriden by every module.</li>
<li><a class="el" href="group__nrf__log__config.html#ga3a13b7559dde2889c272900d38f2f41b">NRF_LOG_DEFERRED</a> - If enabled, then the logs are not processed directly where they are called but deferred to idle state. See <a class="el" href="nrf_log.html#nrf_log_processing">Logs processing</a>. When <a class="el" href="group__nrf__log__config.html#ga3a13b7559dde2889c272900d38f2f41b">NRF_LOG_DEFERRED</a> is enabled, the size of the internal buffer can also be configured. The size is provided in 32-bit words. Standard entries take from one to eight words.</li>
<li><a class="el" href="group__nrf__log__config.html#gaf74fbd7ab681853e83f9b18029208e8e">NRF_LOG_ALLOW_OVERFLOW</a> - If enabled, then if internal circular buffer is full oldest entries are removed and new entries are stored.</li>
<li><a class="el" href="group__nrf__log__config.html#ga54de99b533b75ecce023876d24c05e98">NRF_LOG_FILTERS_ENABLED</a> - If enabled, then logs can be compiled in but not used unless enabled (especially useful when <a class="el" href="structnrf__cli.html" title="CLI instance internals.">nrf_cli</a> is used as backend).</li>
</ul>
<p>A module can have a section that overrides default logger settings for the given module. Modules can override the following configuration:</p>
<ul>
<li>Enabling logs in the module.</li>
<li>Independent lowest severity level.</li>
<li>Info logs coloring.</li>
<li>Debug logs coloring.</li>
</ul>
<h1><a class="anchor" id="nrf_log_usage"></a>
Usage</h1>
<p>Logger usage can be divided into two tasks:</p>
<ul>
<li>Controlling the logger - Initialization, reconfiguration, and triggering processing (in the deferred mode).</li>
<li>Logging.</li>
</ul>
<h2><a class="anchor" id="nrf_log_usage_control"></a>
Controlling the logger</h2>
<p>The nrf_log_ctrl.h file contains the API for controlling the logger. Before the logger can be used, it must be first initialized. The <a class="el" href="group__nrf__log__ctrl.html#gaa5666ad1f5314e15f5e591f135f38503">NRF_LOG_INIT()</a> macro initializes the logger. During initialization, the user must provide a pointer to the timestamp function or NULL if timestamping is disabled. If the deferred mode is used, then it is up to the user to start processing of the buffered log entries. The <a class="el" href="group__nrf__log__ctrl.html#gaea4ee51a39f70f14ad2e3213fa497ade">NRF_LOG_PROCESS()</a> macro is used for that. When <a class="el" href="group__nrf__log__ctrl.html#gaea4ee51a39f70f14ad2e3213fa497ade">NRF_LOG_PROCESS()</a> is called, then the logger attempts to process a single entry and returns true if there are more entries to process or false if the buffer is empty. When logger is initialized it has no backends attached. Next step is to provide the backend using <a class="el" href="group__nrf__log__ctrl.html#ga341d3593b6b5d33434e14a9a1b526efd">nrf_log_backend_add()</a> call. <a class="el" href="group__nrf__log__ctrl.html#ga341d3593b6b5d33434e14a9a1b526efd">nrf_log_backend_add()</a> provides the interface to logger backend which must be already initialized. At any time, backend can be detached from the logger using <a class="el" href="group__nrf__log__ctrl.html#ga02b440b04414b287b9d67390babfe247">nrf_log_backend_remove()</a>. Logger support up to 10 backends.</p>
<p>Initialization and addition of common backeds are bundled into nrf_log_default_backends module. <a class="el" href="group__nrf__log__default__backends.html#gac2e95ef0e3a46df6d129589accabc9e8">NRF_LOG_DEFAULT_BACKENDS_INIT()</a> macro can be used to initialize and attach RTT or UART backend de.</p>
<p>The following code snippet presents how <a class="el" href="group__nrf__log__ctrl.html#gaea4ee51a39f70f14ad2e3213fa497ade">NRF_LOG_PROCESS</a> can be incorporated into the non-preemptive scheduler. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;nrf_log_ctrl.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;nrf_log_default_backends.h&quot;</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    err_code = <a class="code" href="group__nrf__log__ctrl.html#gaa5666ad1f5314e15f5e591f135f38503" title="Macro for initializing the logs.">NRF_LOG_INIT</a>(timestamp_func);</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="group__nrf__log__default__backends.html#gac2e95ef0e3a46df6d129589accabc9e8" title="Macro for initializing default backends.">NRF_LOG_DEFAULT_BACKENDS_INIT</a>();</div>
<div class="line"></div>
<div class="line">...</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span>(1)</div>
<div class="line">    {</div>
<div class="line">        scheduler();</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group__nrf__log__ctrl.html#gaea4ee51a39f70f14ad2e3213fa497ade" title="Macro for processing a single log entry from a queue of deferred logs.">NRF_LOG_PROCESS</a>())</div>
<div class="line">        { </div>
<div class="line">            <span class="comment">//sleep</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Use the <a class="el" href="group__nrf__log__ctrl.html#ga2d86a60e776a72f918d2f6cf7abc3135">NRF_LOG_FLUSH()</a> macro to ensure that all logs have been processed.</p>
<p>Use the <a class="el" href="group__nrf__log__ctrl.html#ga885bb7174399e7e0a7e197ff8bf0f7b0">NRF_LOG_FINAL_FLUSH()</a> macro when it is expected to flush all logs in the blocking mode and wait for all data to be sent to the host. Use this macro in case of an error, right before a reset. In such a situation, if you use the <a class="el" href="group__nrf__log__ctrl.html#ga2d86a60e776a72f918d2f6cf7abc3135">NRF_LOG_FLUSH()</a> macro, you will not receive the whole log, as the transmission will be interrupted by the reset.</p>
<h2><a class="anchor" id="nrf_log_usage_logging"></a>
Logging</h2>
<p>The nrf_log.h file contains the API used for logging. There are two types of log entries:</p>
<ul>
<li>Standard logs with syntax very similar to printf - NRF_LOG_&lt;SEVERITY_LEVEL&gt;().</li>
<li>Hexdump - a method for dumping the data - NRF_LOG_HEXDUMP_&lt;SEVERITY_LEVEL&gt;().</li>
</ul>
<p>The following is an example of the simplest way to log data in a module: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;nrf_log.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> send_func(uint8_t * p_data, uint32_t length)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__nrf__log.html#gac8d37e95648e05580513df9aaddf02c3" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_INFO</a>(<span class="stringliteral">&quot;sending data\r\n&quot;</span>);</div>
<div class="line">    <a class="code" href="group__nrf__log.html#ga543e51f0b87babd154870c494c0165f9" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_DEBUG</a>(<span class="stringliteral">&quot;%d bytes, data:\r\n&quot;</span>, length);</div>
<div class="line">    <a class="code" href="group__nrf__log.html#ga7000f8bd1f36238a99470c004cac84ea" title="Macro for logging raw bytes.">NRF_LOG_HEXDUMP_DEBUG</a>(p_data, length);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (phy_is_busy())</div>
<div class="line">    { </div>
<div class="line">        <a class="code" href="group__nrf__log.html#gaaea89bb5c09b6033729e059826711bb0" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_ERROR</a>(<span class="stringliteral">&quot;Phy is busy\r\n&quot;</span>); </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can customize the logging for each module. Some configuration defines can be redefined before the header is included. Modules can override the severity level, the string prefix, as well as the coloring of info and warning logs.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NRF_LOG_MODULE_NAME spi</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#if SPI_CONFIG_LOG_ENABLED</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define NRF_LOG_LEVEL SPI_CONFIG_LOG_LEVEL</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define NRF_LOG_INFO_COLOR SPI_CONFIG_INFO_COLOR</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define NRF_LOG_DEBUG_COLOR SPI_CONFIG_DEBUG_COLOR</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#else //SPI_CONFIG_LOG_ENABLED</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define NRF_LOG_LEVEL 0</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#endif //SPI_CONFIG_LOG_ENABLED</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#include &quot;nrf_log.h&quot;</span></div>
<div class="line"><a class="code" href="group__nrf__log.html#ga76621628447823a4d868d57f6049eef1" title="Macro for registering an independent module.">NRF_LOG_MODULE_REGISTER</a>();</div>
</div><!-- fragment --><p>If module consists of several files then logger customization should be repeated in every file with one exception. <a class="el" href="group__nrf__log.html#ga76621628447823a4d868d57f6049eef1">NRF_LOG_MODULE_REGISTER()</a> must be called in only one file.</p>
<p>Note: You can also use the following two macros to produce cleaner logs, without the default prefix in the user string:</p>
<ul>
<li><a class="el" href="group__nrf__log.html#ga52fcc01ca50daa79058664f84f1111a8">NRF_LOG_RAW_INFO</a></li>
<li><a class="el" href="group__nrf__log.html#ga4a97416f7949911587dceaae3284491f">NRF_LOG_RAW_HEXDUMP_INFO</a></li>
</ul>
<p>Due to certain limitations, logging a float requires you to use the following dedicated macros: </p>
<div class="fragment"><div class="line"><a class="code" href="group__nrf__log.html#gac8d37e95648e05580513df9aaddf02c3" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_INFO</a>(„float value:” <a class="code" href="group__nrf__log.html#ga51024b65418ae9a0e6d79fe285479b9c" title="Macro to be used in a formatted string to a pass float number to the log.">NRF_LOG_FLOAT_MARKER</a> „\r\n”, NRF_LOG_FLOAG(val))</div>
</div><!-- fragment --><p>Because customized logging in modules relies on the redefinition of defines , including "nrf_log.h" in header files might lead to compilation failures.</p>
<h1><a class="anchor" id="nrf_log_performance"></a>
Performance</h1>
<p>The following measurements were performed on nRF52. In case of deferred logs, timing does not depend on string length and only slightly on the number of arguments. In case of in-place processing with RTT, timing is highly dependent on the number of arguments. In case of UART, the difference between deferred and in-place logging is even bigger, and highly dependent on the baud rate.</p>
<table class="doxtable">
<tr>
<th align="left">Number of arguments </th><th align="left">In-place with RTT </th><th align="left">Deferred</th></tr>
<tr>
<td align="left">0 arguments </td><td align="left">12 us </td><td align="left">2.5 us </td></tr>
<tr>
<td align="left">6 arguments </td><td align="left">300 us </td><td align="left">4.0 us </td></tr>
</table>
<h1><a class="anchor" id="nrf_log_custom"></a>
Logger backend interface</h1>
<p>Logger backend interface is defined in <code>nrf_log_backend_interface.h</code>. Implementation of three functions must be provided:</p>
<ul>
<li>backend_put - this function is called when a log entry is processed by the frontend and passed current backend filtering. A message is provided as an argument. The message contains unprocessed data (string pointer and arguments in case of standard log entry).</li>
<li>panic_set - this function is called when <a class="el" href="group__nrf__log__ctrl.html#ga885bb7174399e7e0a7e197ff8bf0f7b0">NRF_LOG_FINAL_FLUSH()</a> is called. It informs the backend that it should switch to panic mode (e.g. stop using interrupts). Backend can return <a class="elRef" doxygen="tag_s212_offline.tag:../s212/" href="../s212/group__nrf__error.html#gaacf52836cc3860c5ffd4e129f725f138">NRF_ERROR_NOT_SUPPORTED</a> and logger will stop using this backend.</li>
<li>flush - optional flush.</li>
</ul>
<p>Messages provided with the backend_put function are shared between all backends and thus they must be managed by backend implementation. <a class="el" href="group__nrf__memobj.html">Memory Object module</a> memory objects are used for storing messages. When the logger frontend is processing an entry, it allocates memory for the message from the internal pool, removes the entry from internal circular buffer, and creates the message. Then, it iterates on all attached backends and applies dynamic filtering (if enabled). When the backend gets the message, it must indicate that it is in use by calling <a class="el" href="group__nrf__memobj.html#ga7712aeae5acef5407a55700acf555846">nrf_memobj_get</a>. This will ensure that the message will not be freed. <a class="el" href="group__nrf__memobj.html#ga694f0e9cedfbe41739412e9da79a0141">nrf_memobj_put</a> must be called when backend processes the message. The message will be returned to the memory pool if it is processed by all backends.</p>
<dl class="section warning"><dt>Warning</dt><dd>In the current implementation, each and every logger backend shall run on lower or equal priority as the module that is writing logs. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Thu Aug 3 2017" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>
